{% extends 'profiles/profile_base.html' %}
{% load static %}

{% block additional_title %}| Account Info{% endblock %}

{% block profilecontent %}
<div class="row my-lg-5">
    <h1 class="col-12 text-center">My Account</h1>
    <div class="col-12 col-md-6 text-center p-3 py-md-5">
        <img src="/media/android-chrome-512x512_SdtuzdM.png" alt="profile image"
            class="profile-img">
    </div>
    <div class="col-12 col-md-6 text-center text-lg-left">
        {% if profile.has_active_subscription %}
        <h4 class="col-12 pb-3 px-lg-0 pt-lg-4">
            Subscribed since {{ subscription.start_date|date:"M, Y" }}
        </h4>
        {% if subscription.cancel_at_end %}
        <p class="pb-3">
            Your subscription is active until {{ subscription.end_date|date }}.
        </p>
        {% else %}
        <p class="pb-3">
            Your next billing date is {{ subscription.end_date|date }}.
        </p>
        {% endif %}

        {% else %}
        <h4 class="col-12">Not Currently Subscribed</h4>
        {% endif %}
        <p class="pb-3">Email: {{ profile.user.email }}</p>
        <a href="{% url 'account_change_password' %}"
            class="btn btn-info col-12 p-3">Update
            Password</a>
        {% if profile.has_active_subscription %}
        {% if subscription.cancel_at_end %}
        <a href="{% url 'reactivate' %}"
            class="btn btn-info col-12 mt-4 mb-5 p-3">Renew</a>
        {% else %}
        <button class="btn btn-warning col-12 mt-4 mb-5 p-3 cancel"
            data-info="{% url 'cancel_subscription' %}">Cancel
            Subscription</button>
        {% endif %}
        {% endif %}
    </div>

</div>
{% endblock %}

{% if profile.has_active_subscription %}
{% block modal %}
{% include "modal.html" %}
{% endblock %}

{% block postloadjs %}
{{ block.super }}
<script src="{% static 'profiles/js/delete.js' %}" type="text/javascript">
</script>
{% endblock %}
{% endif %}